{% extends "layout/base.html" %}
{% block title %}首页 - Supplier Portal{% endblock %}

{% block content %}
  <!-- 欢迎区 -->
  <section class="rounded-3xl bg-white border border-slate-100 shadow-soft p-6">
    <div class="flex flex-col lg:flex-row lg:items-center gap-4">
      <div class="flex-1">
        <div class="text-sm text-slate-500">Dashboard</div>
        <h1 class="text-2xl font-semibold mt-1">供应商管理工作台</h1>
        <p class="text-slate-600 mt-2">
          集中管理供应商资料、审核状态、版本记录与后续质量模块（PPAP / 8D / TR / KPI）。
        </p>
      </div>

      <div class="flex gap-2">
        <button class="rounded-2xl bg-slate-900 text-white px-4 py-2 text-sm shadow-soft hover:opacity-95">
          新建任务
        </button>
        <button class="rounded-2xl border border-slate-200 bg-slate-50 px-4 py-2 text-sm hover:bg-slate-100">
          查看审核队列
        </button>
      </div>
    </div>
  </section>

  <!-- 统计卡片 -->
  <section class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
    {% for s in stats %}
      <div class="rounded-3xl bg-white border border-slate-100 shadow-soft p-5">
        <div class="text-sm text-slate-500">{{ s.label }}</div>
        <div class="text-3xl font-semibold mt-2">{{ s.value }}</div>
        <div class="text-xs text-slate-500 mt-2">{{ s.hint }}</div>
      </div>
    {% endfor %}
  </section>

  <!-- 两栏：待办 & 最近动态 -->
  <section class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- 待办 -->
    <div class="rounded-3xl bg-white border border-slate-100 shadow-soft p-6">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold">待办 / Roadmap</h2>
        <span class="text-xs text-slate-500">可逐步替换为数据库</span>
      </div>

      <div class="mt-4 space-y-3">
        {% for t in todo %}
          <div class="rounded-2xl border border-slate-100 p-4 hover:bg-slate-50">
            <div class="flex items-start justify-between gap-3">
              <div class="font-medium">{{ t.title }}</div>
              <span class="text-xs rounded-xl px-2 py-1
                           {% if t.tag == 'Next' %} bg-slate-900 text-white {% else %} bg-slate-100 text-slate-700 {% endif %}">
                {{ t.tag }}
              </span>
            </div>
            <div class="text-sm text-slate-600 mt-1">{{ t.desc }}</div>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- 最近动态 -->
    <div class="rounded-3xl bg-white border border-slate-100 shadow-soft p-6">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold">最近提交</h2>
        <button class="text-sm text-slate-600 hover:text-slate-900">查看全部</button>
      </div>

      <div class="mt-4 overflow-hidden rounded-2xl border border-slate-100">
        <table class="w-full text-sm">
          <thead class="bg-slate-50 text-slate-500">
            <tr>
              <th class="text-left font-medium px-4 py-3">Supplier</th>
              <th class="text-left font-medium px-4 py-3">类型</th>
              <th class="text-left font-medium px-4 py-3">时间</th>
              <th class="text-left font-medium px-4 py-3">状态</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-100">
            {% for r in recent %}
              <tr class="hover:bg-slate-50">
                <td class="px-4 py-3 font-medium">{{ r.supplier }}</td>
                <td class="px-4 py-3 text-slate-600">{{ r.type }}</td>
                <td class="px-4 py-3 text-slate-600">{{ r.time }}</td>
                <td class="px-4 py-3">
                  <span class="text-xs rounded-xl px-2 py-1
                    {% if r.status == '待审核' %} bg-amber-100 text-amber-800
                    {% elif r.status == '已通过' %} bg-emerald-100 text-emerald-800
                    {% else %} bg-slate-100 text-slate-700 {% endif %}">
                    {{ r.status }}
                  </span>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="mt-4 rounded-2xl bg-slate-50 border border-slate-100 p-4 text-sm text-slate-600">
        提示：后续“资料库”模块只要把上传文件按 <b>Supplier Code / Doc Type / Version</b> 组织，
        首页这些卡片就能直接从数据库统计出来。
      </div>
    </div>
  </section>
{% endblock %}
